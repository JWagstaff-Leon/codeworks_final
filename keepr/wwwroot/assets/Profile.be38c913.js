import{M as u,j as B,z as y,c as i,a as p,o as a,b as r,d as o,t as _,i as m,F as k,l as x,e as K,k as w,f as C,p as M,m as S}from"./vendor.d2861f43.js";import{a as L,l as I,A as t,_ as F,v as N,k as U,P as j}from"./index.c39ce0d3.js";import{L as E}from"./Loader.7531e362.js";class T{async getById(l){const c=await L.get("api/profiles/"+l);I.log("[ProfilesService > getById > response]",c.data),t.activeProfile=c.data}}const O=new T;const A={async mounted(){await this.mountedFunc()},beforeUnmount(){this.resetPage()},watch:{openModal(s){s?u.getOrCreateInstance(document.getElementById("keep-modal")).show():u.getOrCreateInstance(document.getElementById("keep-modal")).hide()},"route.params.id"(s){s&&(this.resetPage(),this.mountedFunc())}},setup(){const s=B(),l=y(!0);y(!1);const c=()=>{t.activeProfile=null,t.activeVaults=null,t.activeKeeps=null,t.openModal=!1};return{route:s,loading:l,isCurrentUser:i(()=>{var e;return((e=t.account)==null?void 0:e.id)===s.params.id}),profile:i(()=>t.activeProfile),vaults:i(()=>t.activeVaults),filteredVaults:i(()=>{var e;return(e=t.activeVaults)==null?void 0:e.filter(d=>d.name.toLowerCase().includes(t.searchTerm.toLowerCase()))}),keeps:i(()=>t.activeKeeps),filteredKeeps:i(()=>{var e;return(e=t.activeKeeps)==null?void 0:e.filter(d=>d.name.toLowerCase().includes(t.searchTerm.toLowerCase()))}),openModal:i(()=>t.openModal),newItemModal(e){t.newItemIsVault=e,u.getOrCreateInstance(document.getElementById("new-item-modal")).show()},resetPage:c,async mountedFunc(){try{this.loading=!0,t.searchTerm="",this.resetPage();const e=new E;e.step(O.getById,[this.route.params.id]),e.step(N.getByProfile,[this.route.params.id]),e.step(U.getByProfile,[this.route.params.id]),await e.load(),this.loading=!1}catch(e){I.error("[Profile.vue > mountedFunc]",e.message),j.toast(e.message,"error")}}}}},z=s=>(M("data-v-b8ca1b92"),s=s(),S(),s),D={key:0,class:"w-100 h-100 flex-grow-1 align-items-center justify-content-center d-flex"},R=z(()=>o("div",{class:"spinner-border text-secondary"},null,-1)),q=[R],G={key:1},H={class:"d-flex flex-column mx-3 mx-md-5"},J={class:"d-flex mt-5 align-items-center"},Q=["src","alt"],W={class:"d-flex flex-column ms-3 ms-md-5 text-black"},X={class:"mt-5 text-black"},Y=w("Vaults "),Z={class:"d-flex flex-wrap vault-cards-container"},$={key:0,class:"mt-3 mx-auto text-secondary"},ee={key:1,class:"mt-3 mx-auto text-secondary"},te={class:"mt-5 text-black"},se=w("Keeps "),ae={key:0,class:"mt-3 mx-auto text-secondary"},oe={key:1,class:"mt-3 mx-auto text-secondary"},re={class:"masonry-with-columns"};function le(s,l,c,e,d,ne){var f,h,v,g;const P=p("VaultCard"),V=p("KeepCard"),b=p("KeepModal");return e.loading?(a(),r("div",D,q)):(a(),r("div",G,[o("div",H,[o("div",J,[o("img",{src:(f=e.profile)==null?void 0:f.picture,alt:"Profile picture of "+e.profile.name,class:"profile-image rounded-2"},null,8,Q),o("div",W,[o("h1",null,_((h=e.profile)==null?void 0:h.name),1),o("h3",null,"Vaults: "+_((v=e.vaults)==null?void 0:v.length),1),o("h3",null,"Keeps: "+_((g=e.keeps)==null?void 0:g.length),1)])]),o("h1",X,[Y,e.isCurrentUser?(a(),r("i",{key:0,role:"button",class:"mdi mdi-plus text-primary fs-2 action",title:"Create new vault",onClick:l[0]||(l[0]=n=>e.newItemModal(!0))})):m("",!0)]),o("div",Z,[e.vaults.length==0?(a(),r("h1",$,"User has no vaults")):e.filteredVaults.length==0?(a(),r("h1",ee,"No vaults matching search")):m("",!0),(a(!0),r(k,null,x(e.filteredVaults,n=>(a(),C(P,{key:n.id,vault:n},null,8,["vault"]))),128))]),o("h1",te,[se,e.isCurrentUser?(a(),r("i",{key:0,role:"button",class:"mdi mdi-plus text-primary fs-2 action",title:"Create new keep",onClick:l[1]||(l[1]=n=>e.newItemModal(!1))})):m("",!0)]),e.keeps.length==0?(a(),r("h1",ae,"User has no keeps")):e.filteredKeeps.length==0?(a(),r("h1",oe,"No keeps matching search")):m("",!0),o("div",re,[(a(!0),r(k,null,x(e.filteredKeeps,n=>(a(),C(V,{key:n.id,keep:n,isProfile:!0},null,8,["keep"]))),128))])]),K(b,{id:"keep-modal"})]))}var me=F(A,[["render",le],["__scopeId","data-v-b8ca1b92"]]);export{me as default};
